(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1326:function(e,t,n){"use strict";n.r(t),n.d(t,"NoteList",(function(){return z}));var r=n(0),o=n.n(r),a=n(1300),i=n(8),c=n.n(i),l=n(128);function s(){return o.a.createElement("svg",{className:"icon-published-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},o.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),o.a.createElement("g",null,o.a.createElement("polygon",{points:"7.38 10.25 5.13 8.11 6.16 7.02 7.36 8.17 9.82 5.75 10.87 6.82 7.38 10.25"}),o.a.createElement("path",{d:"M13,.93H3a1.5,1.5,0,0,0-1.5,1.5V12.57A1.5,1.5,0,0,0,3,14.07H13a1.5,1.5,0,0,0,1.5-1.5V2.43A1.5,1.5,0,0,0,13,.93ZM3.5,12.07V4h9v8.07Z"})))}function u(){return o.a.createElement("svg",{className:"icon-pinned-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},o.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M4.41,10.17l-4-4,5.65-.52L8.65,3.1,7.24,1.69,8.66.27l7.07,7.07L14.31,8.76,12.89,7.33,10.33,9.91l-.52,5.66-4-4L3,14.41,1.59,13Zm3.8,1L8.4,9l3.07-3.1-1.4-1.41L7,7.6l-2.13.19Z"})))}function p(){return o.a.createElement("svg",{className:"icon-sync-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},o.a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M14,9v5l-1.78-1.78C11.14,13.31,9.66,14,8,14c-2.97,0-5.43-2.16-5.91-5h2.05c0.45,1.72,2,3,3.86,3c1.11,0,2.1-0.46,2.82-1.18L9,9h2.86h2.05H14z M4.14,7H7L5.18,5.18C5.9,4.46,6.89,4,8,4c1.86,0,3.41,1.28,3.86,3h2.05C13.43,4.16,10.97,2,8,2C6.34,2,4.86,2.69,3.78,3.78L2,2v5h0.09H4.14z"})))}var f=n(4),h=n(960),d=n.n(h),m=n(254),y=function(e,t){return e.length>0?e.reduce((function(e,t){var n=t.filter,r=t.replacer,o="string"==typeof n&&Object(m.b)(n),a=o&&o.length>0?new RegExp(Object(f.escapeRegExp)(o),"gi"):n;return d()(e,a,r)}),t).map((function(e,t){return e&&"string"!=typeof e?o.a.cloneElement(e,{key:t}):e})):t},g=function(e){return{filter:e,replacer:function(e){if(e.length)return o.a.createElement("span",{className:"search-match"},e)}}},b=n(590),v=n(284),w=n(153),E=n(205);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,n,r,a=S(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=P(t),o=void 0,(r="createdAt")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.createdAt=Date.now(),t}return t=i,(n=[{key:"componentDidUpdate",value:function(e){var t,n,r=this;(null===(t=e.note)||void 0===t?void 0:t.content)!==(null===(n=this.props.note)||void 0===n?void 0:n.content)&&this.props.invalidateHeight(),this.props.lastUpdated<1e3&&!this.updateScheduled&&(this.updateScheduled=setTimeout((function(){return r.forceUpdate()}),1e3))}},{key:"render",value:function(){var e=this.props,t=e.displayMode,n=e.hasPendingChanges,r=e.isOffline,a=e.isOpened,i=e.lastUpdated,l=e.noteId,f=e.note,h=e.openNote,d=e.pinNote,w=e.searchQuery,E=e.style;if(!f)return o.a.createElement("div",null,"Couldn't find note");var N=Object(b.a)(f),O=N.title,j=N.preview,S=f.systemTags.includes("pinned"),x=!!f.publishURL,P=i-this.createdAt>1e3&&Date.now()-i<1200,D=c()("note-list-item",{"note-list-item-selected":a,"note-list-item-pinned":S,"note-recently-updated":P,"published-note":x}),k=c()("note-list-item-pinner",{"note-list-item-pinned":S}),C=Object(m.a)(w).map(g);return o.a.createElement("div",{style:E,className:D},o.a.createElement("div",{className:"note-list-item-status"},o.a.createElement("div",{className:k,tabIndex:0,onClick:function(){return d(l,!S)}},o.a.createElement(u,null))),o.a.createElement("div",{className:"note-list-item-text theme-color-border",tabIndex:0,onClick:function(){return h(l)}},o.a.createElement("div",{className:"note-list-item-title"},o.a.createElement("span",null,y(C,Object(v.a)(O)))),"expanded"===t&&j.length>0&&o.a.createElement("div",{className:"note-list-item-excerpt"},Object(v.a)(j).split("\n").map((function(e,t){return o.a.createElement(o.a.Fragment,{key:t},t>0&&o.a.createElement("br",null),y(C,e.slice(0,200)))}))),"comfy"===t&&j.length>0&&o.a.createElement("div",{className:"note-list-item-excerpt"},y(C,Object(v.a)(j).slice(0,200)))),o.a.createElement("div",{className:"note-list-item-status-right theme-color-border"},n&&o.a.createElement("span",{className:c()("note-list-item-pending-changes",{"is-offline":r})},o.a.createElement(p,null)),x&&o.a.createElement("span",{className:"note-list-item-published-icon"},o.a.createElement(s,null))))}}])&&O(t.prototype,n),r&&O(t,r),i}(r.Component),C={openNote:w.a.ui.openNote,pinNote:w.a.data.pinNote},L=Object(l.b)((function(e,t){var n,r=t.noteId;return{displayMode:e.settings.noteDisplay,hasPendingChanges:E.c(e,r),isOffline:"offline"===e.simperium.connectionStatus,isOpened:e.ui.openedNote===r,lastUpdated:null!==(n=e.simperium.lastRemoteUpdate.get(r))&&void 0!==n?n:-1/0,note:e.data.notes.get(r),searchQuery:e.ui.searchQuery}}),C)(k),R=n(596);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(s,e);var t,n,i,l=H(s);function s(){var e;A(this,s);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Z(U(e=l.call.apply(l,[this].concat(n))),"state",{heightCache:new a.c({defaultHeight:135,fixedWidth:!0,keyMapper:function(t){var n=e.props,r=n.filteredNotes,o=n.searchQuery,a=n.tagResultsFound;return 0===a&&0===r.length?"no-notes":0===o.length||0===a?r[t]:0===t?"tag-suggestions":1===t?"notes-header":r[t-2]}}),lastNoteDisplay:null,windowWidth:null}),Z(U(e),"list",Object(r.createRef)()),Z(U(e),"handleShortcut",(function(t){if(e.props.keyboardShortcuts){var n=t.ctrlKey,r=t.code,o=t.metaKey,a=t.shiftKey,i=e.props,c=i.isSmallScreen,l=i.showNoteList,s=n||o;return s&&a&&"KeyK"===r?(e.props.selectNoteAbove(),t.stopPropagation(),t.preventDefault(),!1):s&&a&&"KeyJ"===r?(e.props.selectNoteBelow(),t.stopPropagation(),t.preventDefault(),!1):c&&s&&a&&"KeyL"===r?(e.props.toggleNoteList(),t.stopPropagation(),t.preventDefault(),!1):!c||!l||"Enter"!==r||(e.props.openNote(),t.stopPropagation(),t.preventDefault(),!1)}})),Z(U(e),"toggleShortcuts",(function(t){t?window.addEventListener("keydown",e.handleShortcut,!0):window.removeEventListener("keydown",e.handleShortcut,!0)})),e}return t=s,(n=[{key:"componentDidMount",value:function(){this.toggleShortcuts(!0)}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.filteredNotes,i=t.hasLoaded,l=t.noteDisplay,s=t.onEmptyTrash,u=t.openedNote,p=t.searchQuery,f=t.showTrash,h=t.tagResultsFound,d=this.state.heightCache,m=function(e,t,n){return 0===t.length||0===n?e:["tag-suggestions","notes-header"].concat(K(e.length>0?e:["no-notes"]))}(n,p,h),y=m.findIndex((function(e){return e===u})),g=function(e,t){var n=t.heightCache;return function(t){var r=t.index,i=t.key,c=t.parent,l=t.style,s=e[r];return"no-notes"===s?o.a.createElement(a.b,{cache:n,columnIndex:0,key:"no-notes",parent:c,rowIndex:r},o.a.createElement("div",{className:"note-list is-empty",style:F(F({},l),{},{height:200})},o.a.createElement("span",{className:"note-list-placeholder"},"No Notes"))):"tag-suggestions"===s||"notes-header"===s?"tag-suggestions"===s?o.a.createElement(a.b,{cache:n,columnIndex:0,key:"tag-suggestions",parent:c,rowIndex:r},o.a.createElement(R.a,null)):o.a.createElement(a.b,{cache:n,columnIndex:0,key:"notes-header",parent:c,rowIndex:r},o.a.createElement("div",{className:"note-list-header"},"Notes")):o.a.createElement(a.b,{cache:n,columnIndex:0,key:i,parent:c,rowIndex:r},o.a.createElement(L,{invalidateHeight:function(){return n.clear(r,0)},noteId:s,style:l}))}}(m,{heightCache:d}),b=0===m.length,v=o.a.createElement("div",{className:"note-list-empty-trash theme-color-border"},o.a.createElement("button",{type:"button",className:"button button-borderless button-danger",onClick:s},"Empty Trash"));return o.a.createElement("div",{className:c()("note-list",{"is-empty":b})},b?o.a.createElement("span",{className:"note-list-placeholder"},i?"No Notes":"Loading Notes"):o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"note-list-items ".concat(l)},o.a.createElement(a.a,null,(function(t){var n=t.height,r=t.width;return o.a.createElement(a.d,{ref:e.list,estimatedRowSize:126,height:n,noteDisplay:l,notes:m,rowCount:m.length,rowHeight:d.rowHeight,rowRenderer:g,scrollToIndex:y,width:r})}))),f&&v))}}])&&T(t.prototype,n),i&&T(t,i),s}(r.Component);Z(z,"displayName","NoteList"),Z(z,"getDerivedStateFromProps",(function(e,t){return t.heightCache.clear(0),t.heightCache.clear(1),t.heightCache.clear(2),e.noteDisplay!==t.lastNoteDisplay||e.windowWidth!==t.windowWidth?(t.heightCache.clearAll(),{lastNoteDisplay:e.noteDisplay,windowWidth:e.windowWidth}):null}));var J={onEmptyTrash:w.a.ui.emptyTrash,openNote:w.a.ui.openNote,selectNoteAbove:w.a.ui.selectNoteAbove,selectNoteBelow:w.a.ui.selectNoteBelow,toggleNoteList:w.a.ui.toggleNoteList};t.default=Object(l.b)((function(e){return{hasLoaded:e.ui.hasLoadedNotes,isSmallScreen:E.b(e),keyboardShortcuts:e.settings.keyboardShortcuts,noteDisplay:e.settings.noteDisplay,filteredNotes:e.ui.filteredNotes,openedNote:e.ui.openedNote,openedTag:e.ui.openedTag,searchQuery:e.ui.searchQuery,showNoteList:e.ui.showNoteList,showTrash:e.ui.showTrash,tagResultsFound:e.ui.tagSuggestions.length,windowWidth:e.browser.windowWidth}}),J)(z)}}]);